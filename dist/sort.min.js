!function(a){"use strict";a.fn=a.fn||{datagen:{}}}(this),function(a){"use strict";var b=2;a.fn.datagen.almostSorted=function(c){var d,e,f=a.fn.datagen.sorted(c),g=[],h=f.length;for(e=0;h>e;e++)d=a.fn.random(e,Math.min(e+b,h-1)),g.indexOf(e)<0&&g.indexOf(d)<0&&(g.push(e),g.push(d),a.fn.swap(f,e,d));return f}}(this),function(a){"use strict";var b=4;a.fn.datagen.fewUnique=function(c){var d,e=[];for(d=0;c>d;d++)e.push(c-1-Math.floor(c/b)*(d%b));return a.fn.shuffle(e)}}(this),function(a){"use strict";a.fn.datagen.randomDupes=function(a){var b,c=[];for(b=0;a>b;b++)c.push(Math.floor(Math.random()*a));return c}}(this),function(a){"use strict";a.fn.datagen.randomUnique=function(b){return a.fn.shuffle(a.fn.datagen.sorted(b))}}(this),function(a){"use strict";a.fn.datagen.reverse=function(b){return a.fn.datagen.sorted(b).reverse()}}(this),function(a){"use strict";a.fn.datagen.sorted=function(a){var b,c=[];for(b=0;a>b;b++)c.push(b);return c}}(this),function(a){"use strict";a.fn.random=function(a,b){return Math.floor(Math.random()*(b-a+1))+a}}(this),function(a){"use strict";a.fn.shuffle=function(b){var c,d=b.length;if(0===d)return b;for(;--d;)c=Math.floor(Math.random()*(d+1)),b=a.fn.swap(b,d,c);return b}}(this),function(a){"use strict";a.fn.swap=function(a,b,c){var d,e,f=a.length;return b=parseInt(b,10)||0,c=parseInt(c,10)||0,b!==c&&b>=0&&c>=0&&f>b&&f>c&&(d=a[b],e=a[c],a[b]=e,a[c]=d),a}}(this),function(a){"use strict";a.sort=a.sort||{}}(this),function(a){"use strict";a.sort.bubble=function(){var a,b,c=AS.length();do{for(b=!1,a=0;c-1>a;a++)AS.play(a),AS.mark(a),AS.lt(a+1,a)&&(AS.swap(a+1,a),b=!0);c--}while(b);AS.play(a)},a.sort.bubble.display="Bubble",a.sort.bubble.stable=!0,a.sort.bubble.best="n",a.sort.bubble.average="n^2",a.sort.bubble.worst="n^2",a.sort.bubble.memory="1",a.sort.bubble.method="exchanging"}(this),function(a){"use strict";a.sort.insertion=function(){var a,b,c,d,e=AS.length();for(a=0;e>a;a++)for(c=AS.get(a),b=a-1;b>-1;b--)d=AS.get(b),AS.play(b),AS.gt(d,c)&&AS.swap(b,b+1)},a.sort.insertion.display="Insertion",a.sort.insertion.stable=!0,a.sort.insertion.best="n",a.sort.insertion.average="n^2",a.sort.insertion.worst="n^2",a.sort.insertion.memory="1",a.sort.insertion.method="insertion"}(this),function(a){"use strict";a.sort.quick=function(){var a,b;a=function(a,b){var c=Math.floor((b+a)/2),d=AS.get(c),e=a,f=b;for(AS.clearHighlight(),AS.play(e,f),AS.mark(e,f),AS.highlight(e,f,c);f>=e;){for(;AS.lt(AS.get(e),d);)AS.play(e,f),AS.mark(e,f),e++;for(;AS.gt(AS.get(f),d);)AS.play(e,f),AS.mark(e,f),f--;f>=e&&(AS.play(e,f),AS.mark(e,f),AS.swap(e,f),e++,f--)}return AS.clearHighlight(),e},b=function(c,d){var e,f=AS.length();f>1&&(c="number"!=typeof c?0:c,d="number"!=typeof d?f-1:d,AS.mark(c,d),e=a(c,d),e-1>c&&b(c,e-1),d>e&&b(e,d))},b()},a.sort.quick.display="Quick",a.sort.quick.stable=!0,a.sort.quick.best="n",a.sort.quick.average="n^2",a.sort.quick.worst="n^2",a.sort.quick.memory="1",a.sort.quick.method="exchanging"}(this),function(a){"use strict";a.sort.selection=function(){var a,b,c,d=AS.length();for(b=0;d>b;b++){for(a=b,c=b+1;d>c;c++)AS.play(c),AS.mark(b,c),AS.lt(c,a)&&(a=c);b!==a&&AS.swap(b,a)}},a.sort.selection.display="Selection",a.sort.selection.stable=!1,a.sort.selection.best="n^2",a.sort.selection.average="n^2",a.sort.selection.worst="n^2",a.sort.selection.memory="1",a.sort.selection.method="selection"}(this),function(a){"use strict";a.visualization=a.visualization||{}}(this),function(a){"use strict";var b=-1,c=-1,d=-1,e=-1,f=!1;a.visualization.bar=function(a){var g,h,i,j,k,l,m,n,o={};return l=function(a){g=a.data,i=a.svg,h=a.$svg,h.removeAttr("preserveAspectRatio"),h.removeAttr("viewBox"),j=a.hasMarkers,k=a.onClick},m=function(a,b,c){var d,e,f,g;j&&(d=i.selectAll("circle."+c).data(a.arr),e=a.arr.length,d.enter().append("circle"),f=100/(4*Math.max(e,20)),g=100-10*b+"%",d.attr("cy",g).attr("cx",function(a,b){var c=100/(2*e);return 100*(b/e)+c+"%"}).attr("r",function(){return f+"%"}).attr("class",c).attr("style",function(a){return a[c]?"":"display:none"}),d.exit().remove())},n=function(a){var b,c,d,e,f,h,i,j=$(a.currentTarget),k=j.parent(),l=0,m=0;return d=k.offset(),e=a.pageX-d.left,f=a.pageY-d.top,e-=parseInt(k.css("border-left-width"),10),e-=parseInt(k.css("margin-left"),10),e-=parseInt(k.css("padding-left"),10),f-=parseInt(k.css("border-top-width"),10),f-=parseInt(k.css("margin-top"),10),f-=parseInt(k.css("padding-top"),10),h=j.parent().width(),i=j.parent().height(),g.length>0&&(l=g[0].arr.length,m=l-1),b=Math.floor(e/h*l),c=Math.floor(f/i*l),b=isFinite(b)?b:0,c=isFinite(c)?c:0,b=Math.min(m,b),c=Math.min(m,c),c=m-c,{index:b,value:c}},o.onMouseMove=function(a){var g,i=n(a);b!==i.index&&(b=i.index,g=h.find("rect"),g.attr("opacity",1),g.eq(b).attr("opacity",.5)),c=i.value,!f||b===d&&c===e||(d=b,e=c,k(d,e))},o.onMouseOut=function(){b=-1,h.find("rect").attr("opacity",1)},o.onMouseDown=function(a){var b=n(a);a.preventDefault(),f=!0,d=b.index,e=b.value,k(d,e)},o.onMouseUp=function(){f=!1,d=-1,e=-1},o.draw=function(a){var b,c,d;return g.length>0&&(b=g[a],c=i.selectAll("rect").data(b.arr),d=b.arr.length,c.enter().append("rect"),c.attr("width",function(){return 100/d+"%"}).attr("height",function(a){return 100/d*(a.value+1)+"%"}).attr("x",function(a,b){return 100*(b/d)+"%"}).attr("y",function(a){return 100-100/d*(a.value+1)+"%"}).attr("class",function(a){return a.play?"play":""}),c.exit().remove(),m(b,1,"highlight"),m(b,2,"justSwapped"),m(b,3,"swap"),m(b,4,"compare"),m(b,5,"mark")),b},l(a),o}}(this),function(a){"use strict";a.visualization.flat=function(a){var b,c,d,e,f,g,h={},i=[],j=[],k=0,l=0,m="steelblue",n="#c80000";return e=function(a){i=a.data,c=a.svg,b=a.$svg,i.length?(k=i[0].arr.length,l=i.length,g()):(k=0,l=0,j=[]),b.empty(),c.attr("viewBox","0 0 0 0"),c.attr("preserveAspectRatio","none"),c.attr("viewBox","0 0 "+(l-1)+" "+k),b.empty(),f()},g=function(){var a,b,c,d,e,f,g,h,o=[];if(j=[],i.length){for(g=i[i.length-1].arr,h=Math.floor(k/2),a=0;k>a;a++)c=g[a].id,o.push(c),j[a]={id:c,dataColor:d3.rgb(m).darker((a-h)/h).toString(),playColor:d3.rgb(n).darker((a-h)/h).toString(),playIndexes:[],lineData:[]};for(a=0;l>a;a++)for(d=i[a].arr,b=0;b<d.length;b++)e=d[b],f=o.indexOf(e.id),j[f].lineData.push({x:a,y:b+.5}),e.play&&j[f].playIndexes.push(a);j.reverse()}},f=function(a){var b;b=d3.svg.line().interpolate("linear").x(function(a){return a.x}).y(function(a){return a.y}),d=c.selectAll(".line").data(j),d.enter().append("path"),d.attr("class","line").attr("data-id",function(a){return a.id}).attr("stroke",function(b){return b.playIndexes.indexOf(a)>=0?b.playColor:b.dataColor}).attr("fill","none").attr("stroke-width",.5).attr("d",function(a){return b(a.lineData)}),d.exit().remove()},h.draw=function(a){return d.attr("stroke",function(b){return b.playIndexes.indexOf(a)>=0?b.playColor:b.dataColor}),i.length>0?i[a]:void 0},e(a),h}}(this),/*!
 * Project: Audio Sort
 *    File: AS.js
 *  Source: https://github.com/skratchdot/audio-sort/
 *
 * Copyright (c) 2013 skratchdot
 * Licensed under the MIT license.
 */
function(a){"use strict";var b,c,d,e,f,g,h,i={},j=[],k=[],l="",m={play:[],mark:[],swap:[],compare:[],highlight:[]},n=0,o=0;d=function(a){var b,c="object"==typeof a,d=parseInt(1e7*Math.random(),10);return b={id:c?a.id:d+"_"+a,value:c?a.value:a,play:c?a.play:!1,mark:c?a.mark:!1,swap:c?a.swap:!1,justSwapped:c?a.justSwapped:!1,compare:c?a.compare:!1,highlight:c?a.highlight:!1}},e=function(a){(0===k.length||m.hasOwnProperty(a)&&m[a].length)&&b()},b=function(){var a,b,c=[];for(a=0;a<j.length;a++)b=d(j[a]),m.swap.indexOf(b.id)>=0&&(b.justSwapped=!0),m.highlight.indexOf(b.id)>=0&&(b.highlight=!0),c.push(b);k.push({arr:c,compareCount:n,swapCount:o}),m.play=[],m.mark=[],m.swap=[],m.compare=[]},f=function(a){var b;for(b=0;b<j.length;b++)if(j[b].id===a.id)return b;return-1},g=function(a){var b,c,d=[];for(b=0;b<a.length;b++)c=a[b],"number"==typeof c&&(c=i.get(c)),d.push(c);return d},c=function(a,b){var c=h("compare",[a,b]);return n++,k[k.length-1].compareCount=n,c},h=function(a,b){var c,d,h,i,j=g(b);for(e(a),c=k.length-1,d=k[c].arr.length,h=0;h<j.length;h++)i=f(j[h]),i>=0&&d>i&&(k[c].arr[i][a]=!0,m.hasOwnProperty(a)&&m[a].push(k[c].arr[i].id));return j},i.getFrames=function(){return k},i.init=function(a,b){var c;for(j=[],k=[],l=b,n=0,o=0,c=0;c<a.length;c++)j.push(d(a[c]))},i.end=function(a){var c,d;if(l===a){for(0===k.length&&b(),d=k[k.length-1].arr,c=0;c<j.length;c++)if(j[c].id!==d)return b(),k;return k}return[]},i.length=function(){return j.length},i.size=i.length,i.lt=function(a,b){var d=c(a,b);return d[0].value<d[1].value},i.lte=function(a,b){var d=c(a,b);return d[0].value<=d[1].value},i.gt=function(a,b){var d=c(a,b);return d[0].value>d[1].value},i.gte=function(a,b){var d=c(a,b);return d[0].value>=d[1].value},i.eq=function(a,b){var d=c(a,b);return d[0].value===d[1].value},i.neq=function(a,b){var d=c(a,b);return d[0].value!==d[1].value},i.play=function(){h("play",arguments)},i.mark=function(){h("mark",arguments)},i.clearHighlight=function(){m.highlight=[]},i.highlight=function(){i.clearHighlight(),h("highlight",arguments)},i.get=function(a){return d(j[a])},i.swap=function(a,b){var c,d,e,g,i;i=h("swap",[a,b]),c=f(i[0]),d=f(i[1]),e=j[c],g=j[d],j[c]=g,j[d]=e,o++,k[k.length-1].swapCount=o},a.AS=i}(this),/*!
 * Project: Audio Sort
 *    File: AudioHelper.js
 *  Source: https://github.com/skratchdot/audio-sort/
 *
 * Copyright (c) 2013 skratchdot
 * Licensed under the MIT license.
 */
function(a){"use strict";var b,c={};b=function(a,b,c,d){return a[d%b]+Math.floor(d/b)*c},c.getMidiNumber=function(a){var c,d,e,f,g,h,i;return c=sc.ScaleInfo.at(AudioSort.getSelected("scale")),d=c.pitchesPerOctave(),e=c.degrees(),f=e.length,g=Math.floor(AudioSort.getSelected("dataSize")/2),h=b(e,f,d,a),i=b(e,f,d,g),h+AudioSort.getSelected("centerNote")-i},a.AudioHelper=c}(this),/*!
 * Project: Audio Sort
 *    File: AudioPlayer.js
 *  Source: https://github.com/skratchdot/audio-sort/
 *
 * Copyright (c) 2013 skratchdot
 * Licensed under the MIT license.
 */
function(a){"use strict";a.AudioPlayer={},a.AudioPlayer.create=function(b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J={},K="rgba(255, 255, 255, 0)",L="bar";return A=function(){c=c||{},d=c.isLooping||!1,e=c.isPlaying||!1,f=c.isReverse||!1,h=c.hasMarkers||!1,i=c.allowHover||!1,j=c.allowClick||!1,k=c.onClick,"function"!=typeof k&&(k=$.noop),g=0,l=$(b||null),o=l.find(".compare-current"),p=l.find(".compare-max"),q=l.find(".swap-current"),r=l.find(".swap-max"),s=l.find(".position-current"),t=l.find(".position-max"),m=l.find("svg"),u=d3.select("#"+m.attr("id")),H=c.onPlayerButtonClickCallback||null,J.refreshWaveGenerator(),w=timbre("interval",{interval:AudioSort.getTempoString()},E),l.find(".player-buttons").on("click",".btn",G),i&&(m.on("mousemove",function(a){z.onMouseMove&&z.onMouseMove(a)}),m.on("mouseout",function(a){z.onMouseOut&&z.onMouseOut(a)})),j&&(m.on("mousedown",function(a){z.onMouseDown&&z.onMouseDown(a)}),$("body").on("mouseup",function(a){z.onMouseUp&&z.onMouseUp(a)}))},B=function(a){var b=a.getContext("2d");b.clearRect(0,0,b.canvas.width,b.canvas.height)},C=function(){var a,b=v.length,c=b-1;D(),a=z.draw(g),a&&(o.length&&o.text(a.compareCount),p.length&&p.text(c>0?v[c].compareCount:0),q.length&&q.text(a.swapCount),r.length&&r.text(c>0?v[c].swapCount:0),s.length&&s.text(g+1),t.length&&t.text(b))},F=function(){n.length&&n.slider("setValue",g)},D=function(){g=Math.min(g,v.length-1),g=Math.max(g,0)},E=function(){var a,b,c,h,i;if(e){if(D(),F(),v.length>0){for(b=v[g],i=AudioSort.getSelected("audioType"),c=0;c<b.arr.length;c++)h=b.arr[c],h.play&&(a=AudioHelper.getMidiNumber(h.value),a>=0&&128>a&&("waveform"===i?y.noteOn(a,64):"soundfont"===i&&timbre.soundfont.play(a,!1,{mul:1.5*AudioSort.getSelected("volume")})));C()}g=f?g-1:g+1,!d&&(0>g||g>=v.length)&&J.stop(),d&&0>g?g=v.length-1:d&&g>=v.length&&(g=0)}else J.stop()},G=function(){var a=$(this),b=a.data("action");"stop"===b?J.stop():"play"===b?J.play():"reverse"===b?J.play(!0):"goToFirst"===b?J.goToFirst():"goToLast"===b?J.goToLast():"loop"===b&&(d=!a.hasClass("active"),d?a.addClass("active"):a.removeClass("active")),F(),"function"==typeof H&&H({item:a,action:b})},I=function(a){g=parseInt(a.value,10),D(),C()},J.setData=function(a){var c=b+" .position-container";v=a,n=AudioSort.createSlider(c,{value:0,min:0,max:v.length-1,step:1},I),J.setVisualization(L,!0)},J.setVisualization=function(b,c){var d=!1;a.visualization.hasOwnProperty(b)&&L!==b&&(L=b,d=!0),d&&m.empty(),(d||c)&&(z=a.visualization[L]({data:v,svg:u,$svg:m,hasMarkers:h,onClick:k}),C())},J.setTempo=function(a){w.set({interval:a})},J.setVolume=function(a){y.set({mul:a})},J.play=function(a){w.stop(),e=!0,a===!0?(f=!0,0>=g&&(g=v.length-1)):(f=!1,g>=v.length-1&&(g=0)),f=a===!0?!0:!1,"waveform"===AudioSort.getSelected("audioType")&&y.play(),w.start()},J.stop=function(){e=!1,w.stop()},J.isPlaying=function(){return e},J.goToFirst=function(){g=0,D(),C()},J.goToLast=function(){g=v.length-1,D(),C()},J.getMidiBytes=function(){var a,b,c,d,e,f,g,h,i=0,j=64;for(c=new Midi.File,d=new Midi.Track,d.setTempo(AudioSort.getSelected("tempo")),c.addTrack(d),a=0;a<v.length;a++){for(e=v[a],h=[],b=0;b<e.arr.length;b++)f=e.arr[b],f.play&&(g=AudioHelper.getMidiNumber(f.value),g>=0&&128>g&&h.push(g));for(b=0;b<h.length;b++)0===b?d.noteOn(i,h[b],j):d.noteOn(i,h[b]);for(b=0;b<h.length;b++)d.noteOff(i,h[b])}return c.toBytes()},J.refreshWaveGenerator=function(){var a=AudioSort.getSelectedWaveformInfo();$.each([x,y],function(a,b){$.each(["pause","removeAllListeners"],function(a,c){b&&"function"==typeof b[c]&&b[c]()})}),x=timbre("adshr",{a:a.a,d:a.d,s:a.s,h:a.h,r:a.r}),y=timbre(a.gen,{env:x,mul:AudioSort.getSelected("volume")*a.mul,poly:a.poly||10}).on("ended",function(){e||this.pause()}),"OscGen"===a.gen&&y.set("osc",timbre(AudioSort.getSelected("waveform"))),e&&"waveform"===AudioSort.getSelected("audioType")&&y.play()},J.drawEnvelopeCanvas=function(){var a=$("#waveform-adshr-canvas").get(0);B(a),x&&"function"==typeof x.plot&&x.plot({target:a,background:K})},J.drawWaveformCanvases=function(){var a=$("#waveform-canvas").get(0);J.drawEnvelopeCanvas(),B(a),y&&y.osc&&y.osc.plot({target:a,background:K})},A(),J}}(this),/*!
 * Project: Audio Sort
 *    File: AudioSort.js
 *  Source: https://github.com/skratchdot/audio-sort/
 *
 * Copyright (c) 2013 skratchdot
 * Licensed under the MIT license.
 */
function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U={},V=Function,W={volume:{value:.25,min:0,max:1,step:.01},tempo:{value:90,min:20,max:300,step:1},centerNote:{value:69,min:0,max:127,step:1},scale:{value:"chromatic"},sort:{value:"bubble"},dataSize:{value:12,min:4,max:48,step:1},audioType:{value:"waveform"},waveform:{value:"string"},soundfont:{value:0}},X={volume:W.volume.value,tempo:W.tempo.value,centerNote:W.centerNote.value,scale:W.scale.value,sort:W.sort.value,dataSize:W.dataSize.value,audioType:W.audioType.value,waveform:W.waveform.value,soundfont:W.soundfont.value},Y={string:{gen:"PluckGen",poly:10,mul:1,a:50,d:300,s:.5,h:500,r:2500},sin:{gen:"OscGen",poly:10,mul:1,a:50,d:300,s:.5,h:200,r:300},cos:{gen:"OscGen",poly:10,mul:1,a:50,d:300,s:.5,h:200,r:300},pulse:{gen:"OscGen",poly:10,mul:.25,a:50,d:300,s:.5,h:200,r:300},tri:{gen:"OscGen",poly:10,mul:1,a:50,d:300,s:.5,h:200,r:300},saw:{gen:"OscGen",poly:10,mul:.25,a:50,d:300,s:.5,h:200,r:300},fami:{gen:"OscGen",poly:10,mul:1,a:50,d:300,s:.5,h:200,r:300},konami:{gen:"OscGen",poly:10,mul:.4,a:50,d:300,s:.5,h:200,r:300}},Z={},_={base:null,sort:null},ab=!1,bb={},cb=[],db=[],eb=null,fb=250,gb=null,hb="dist/worker.min.js";r=function(b){var c,d,e,f,g;if(a.hasOwnProperty("sort")){c=$(b),c.empty();for(f in a.sort)a.sort.hasOwnProperty(f)&&(g=a.sort[f],d=$("<li></li>"),e=$('<a href="javascript:void(0);"></a>'),e.attr("data-sort",f),e.text(g.display),d.append(e),c.append(d))}},j=function(){var a="";$.each(Y,function(b){a+=$("<button />").addClass("btn btn-mini"+(b===X.waveform?" active":"")).attr("type","button").attr("data-waveform",b).text(b).wrap("<div />").parent().html()}),$("#waveform .btn-group").html(a)},H=function(){var a=$(this);X.waveform=a.attr("data-waveform"),l(),T("#audio-type-display","waveform: "+X.waveform),_.base.refreshWaveGenerator(),_.sort.refreshWaveGenerator(),_.base.drawWaveformCanvases()},x=function(a){var b,c=[];for(b=0;b<cb.length;b++)c.push({value:cb[b],play:b===a,mark:!1,swap:!1,justSwapped:!1,compare:!1,highlight:!1});return c},w=function(){var a,b=[];for(a=0;a<cb.length;a++)b.push({arr:x(a),compareCount:0,swapCount:0});return b},s=function(){$('#sort-player .btn[data-action="play"]').click()},y=function(a){var b=["c","c#","d","d#","e","f","f#","g","g#","a","a#","b"],c=b.length,d=Math.floor(a/c)-1,e=a%c,f=b[e];return"("+f.charAt(0)+d+f.charAt(1)+") "+a},T=function(a,b,c){bb.hasOwnProperty(a)||(bb[a]=$(a)),"function"==typeof c&&(b=c(b)),bb[a].text(b)},m=function(){var a,b=$(this),c=$("#settings li[data-audio-type]"),d=$("#audio-type-tab-link"),e=b.attr("data-audio-type"),f=b.text();X.audioType=e,a=e,"waveform"===X.audioType?(a+=": "+X.waveform,_.base.refreshWaveGenerator(),_.sort.refreshWaveGenerator()):"soundfont"===X.audioType&&(a=$("#soundfont-options li.active").text()),T("#audio-type-display",a),d.text(f.toLowerCase()+" settings"),c.removeClass("hidden"),c.filter('[data-audio-type!="'+e+'"]').addClass("hidden"),R()},n=function(){$("#settings li[data-audio-type]:visible a").click()},B=function(a,b,c,d){c&&(X[a]=c.value),T(b,X[a],d)},F=function(a){var b;B("volume","#volume-display",a,function(a){return a.toFixed(2)}),b=Y[X.waveform].mul*X.volume,_.base.setVolume(b),_.sort.setVolume(b)},E=function(a){var b=U.getTempoString();B("tempo","#tempo-display",a),_.base.setTempo(b),_.sort.setTempo(b)},C=function(a){B("centerNote","#center-note-display",a,y),R()},D=function(a){B("dataSize","#data-size-display",a),u(!1),t()},G=function(a){var b=$(a.target),c=b.parents("[data-adshr]:first"),d=c.attr("data-adshr");Y[X.waveform][d]="s"===d?a.value.toFixed(2):a.value,k(),_.base.refreshWaveGenerator(),_.sort.refreshWaveGenerator(),_.base.drawEnvelopeCanvas()},A=function(){var b=$(this).data("action");a.fn.datagen.hasOwnProperty(b)&&(u(!0,b),t())},I=function(){var a=$(this),b=a.parent();a.hasClass("disabled")||(b.find("li").removeClass("active"),a.addClass("active"),T("#sort-display",a.text()),X.sort=a.find("a").data("sort"),e.hasClass("active")&&(ab=!0),t())},k=function(){T("#waveform-adshr-attack-display",Y[X.waveform].a),T("#waveform-adshr-decay-display",Y[X.waveform].d),T("#waveform-adshr-sustain-display",Y[X.waveform].s),T("#waveform-adshr-hold-display",Y[X.waveform].h),T("#waveform-adshr-release-display",Y[X.waveform].r)},l=function(){$.each(["a","d","s","h","r"],function(a,b){Z[b].slider("setValue",Y[X.waveform][b])}),k()},v=function(a,b,c,d){return d3.scale.linear().domain([a,b]).range([c,d])},u=function(b,c){var d,e,f;if(b){if(a.fn.datagen.hasOwnProperty(c))for(cb=a.fn.datagen[c](X.dataSize),db=a.fn.datagen[c](W.dataSize.max),f=db.slice(0,X.dataSize),e=v(0,cb.length-1,d3.min(f),d3.max(f)),d=0;d<cb.length;d++)db[d]=Math.round(e(cb[d]))}else for(cb=db.slice(0,X.dataSize),e=v(d3.min(cb),d3.max(cb),0,cb.length-1),d=0;d<cb.length;d++)cb[d]=Math.round(e(db[d]));_.base.setData(w()),R()},i=function(a){var b=$(a),c="id_"+(new Date).getTime();b.empty().append('<div class="js-editor" id="'+c+'"></div>'),d=ace.edit(c),d.setTheme("ace/theme/monokai"),d.getSession().setMode("ace/mode/javascript"),d.getSession().on("changeAnnotation",function(){var a,b,c=d.getSession().getAnnotations(),e=[],f=!1;for(a=0;a<c.length;a++)b=c[a],"'AS' is not defined."===b.text?f=!0:e.push(b);f&&d.getSession().setAnnotations(e)})},J=function(){var a=$("#modal-midi-export");$("#new-file-name").attr("placeholder","AudioSort_"+(new Date).getTime()).val(""),$("#midi-export-btn").attr("data-midi-export",$(this).data("midiExport")),a.modal()},K=function(){var a,b,c=$("#midi-export-btn").attr("data-midi-export"),d=$("#new-file-name"),e=$.trim(d.val());""===e&&(e=d.attr("placeholder")),e+=".mid",_.hasOwnProperty(c)&&(a=$.map(_[c].getMidiBytes().split(""),function(a){return a.charCodeAt(0)}),b=new Blob([new Uint8Array(a)],{type:"audio/midi"}),saveAs(b,e))},L=function(){var b,c,e=$("#modal-sort"),f=a.sort[X.sort];e.find(".sort-name").text(f.display),e.find(".nav-tabs a:first").tab("show"),e.find("#sort-info-display").html(f.display||"&nbsp;"),e.find("#sort-info-stable").html(f.stable?"Yes":"No"),e.find("#sort-info-best").html(f.best||"&nbsp;"),e.find("#sort-info-average").html(f.average||"&nbsp;"),e.find("#sort-info-worst").html(f.worst||"&nbsp;"),e.find("#sort-info-memory").html(f.memory||"&nbsp;"),e.find("#sort-info-method").html(f.method||"&nbsp;"),i("#sort-algorithm"),b=$.trim(f.toString()).split("\n"),c=b.splice(1,b.length-2).join("\n"),c=js_beautify(c,{indent_size:1,indent_char:"	"}),d.setValue(c),d.clearSelection(),e.modal()},M=function(){var a=$(this),b=a.data("visualization");_.sort.setVisualization(b)},o=function(){a.sort[X.sort]=new V(d.getValue()),$("#modal-sort").modal("hide")},p=function(){var b=$("#new-sort-name").val(),c=b.replace(/[^a-zA-Z]/gi,""),e=c+"_id_"+(new Date).getTime();$.trim(b).length&&(a.sort[e]=new V(d.getValue()),a.sort[e].display=b,a.sort[e].stable=!0,a.sort[e].best="",a.sort[e].average="",a.sort[e].worst="",a.sort[e].memory="",a.sort[e].method=""),$("#modal-add-algorithm").modal("hide"),r("#sort-options")},N=function(){var a=$("#modal-add-algorithm");a.find("#new-sort-name").val(""),i("#new-sort-algorithm"),a.modal()},O=function(a,b){("play"===b||"reverse"===b||"stop"===b)&&a.stop()},S=function(){_.base=AudioPlayer.create("#base-section",{env:b,pluck:c,isLooping:!0,hasMarkers:!1,allowHover:!0,allowClick:!0,onClick:function(a,b){cb[a]=b,db[a]=v(0,cb.length-1,0,db.length-1)(b),_.base.setData(w()),clearTimeout(eb),eb=setTimeout(t,fb)},onPlayerButtonClickCallback:function(a){O(_.sort,a.action)}}),_.sort=AudioPlayer.create("#sort-section",{env:b,pluck:c,isLooping:!0,hasMarkers:!0,onPlayerButtonClickCallback:function(a){O(_.base,a.action)}})},z=function(){var a=sc.ScaleInfo.names().sort(function(a,b){var c=0,d=sc.ScaleInfo.at(a),e=sc.ScaleInfo.at(b);return c=d.pitchesPerOctave()-e.pitchesPerOctave(),0===c&&(c=d.degrees().length-e.degrees().length,0===c&&(c=d.name.localeCompare(e.name))),c});return a},P=function(a){var b,c,d,e,f,g,h,i=$(a),j="";e=z(),$.each(e,function(a,e){d=sc.ScaleInfo.at(e),f=d.pitchesPerOctave(),g=d.degrees().length,b=f+"_"+g,b!==c&&(c=b,h=$("<li />").addClass("disabled").wrapInner($('<a href="javascript:void(0);"></a>').text("Octave: "+f+" / Notes: "+g)),j+=h.wrap("<div />").parent().html()),h=$("<li />").attr("data-scale",e).wrapInner($('<a href="javascript:void(0);"></a>').text(d.name)),j+=h.wrap("<div />").parent().html()}),i.append(j),i.on("click","li",function(){var a=$(this);a.hasClass("disabled")||(i.find("li").removeClass("active"),a.addClass("active"),X.scale=a.data("scale"),T("#scale-display",a.text()),R())})},Q=function(a){var b,c,d,e="",f=$(a),g="";for(b=0;b<U.instruments.length;b++)c=U.instruments[b],e!==c.group&&(e=c.group,d=$("<li />").addClass("disabled").wrapInner($('<a href="javascript:void(0);"></a>').text(c.group)),g+=d.wrap("<div />").parent().html()),d=$("<li />").attr("data-soundfont",c.val).wrapInner($('<a href="javascript:void(0);"></a>').text(c.name)),X.soundfont===b&&d.addClass("active"),g+=d.wrap("<div />").parent().html();g+=d.wrap("<div />").parent().html(),f.append(g),f.on("click","li",function(){var a=$(this);a.hasClass("disabled")||(f.find("li").removeClass("active"),a.addClass("active"),X.soundfont=a.data("soundfont"),timbre.soundfont.setInstrument(X.soundfont),T("#soundfont-display",a.text()),T("#audio-type-display",a.text()),R())})},R=function(){var a,b,c=[];if("soundfontX"===X.audioType){for(a=0;a<cb.length;a++)b=AudioHelper.getMidiNumber(cb[a]),-1===c.indexOf(b)&&b>=0&&128>b&&c.push(b);timbre.soundfont.preload(c)}},q=function(){var a=!1,b=$(this),c=b.attr("data-list-id"),d=$("#"+c+" li"),e=$.trim(b.val()),f=new RegExp(e,"i");""===e?d.show():$.each(d.get().reverse(),function(b,c){var d=$(c);d.hasClass("disabled")?(d.css("display",a?"block":"none"),a=!1):f.test(d.text())?(d.show(),a=!0):d.hide()})},g=function(a){var b=_.sort.isPlaying();a.data.key===f&&(_.sort.setData(a.data.frames||[]),_.sort.goToFirst(),(b||ab)&&s()),ab=!1},h=function(a){console.log(a)},t=function(){return f=(new Date).getTime(),"undefined"==typeof Worker?(AS.init(cb,f),a.sort[X.sort](),g({data:{key:f,frames:AS.end(f)}}),void 0):(null!==gb&&(gb.removeEventListener("message",g,!1),gb.removeEventListener("error",h,!1),gb.terminate()),gb=new Worker(hb),gb.addEventListener("message",g,!1),gb.addEventListener("error",h,!1),gb.postMessage({key:f,fn:a.sort[X.sort].toString(),arr:cb}),void 0)},U.createSlider=function(a,b,c){var d,e=$(a),f=$('<div class="audio-sort-slider"></div>');return e.empty(),f.appendTo(e),d=f.slider({value:b.value,min:b.min,max:b.max,step:b.step,orientation:"horizontal",selection:"none",tooltip:"hide"}),d.on("slide",c),d.on("slideStop",c),$(a+" .slider").width("100%"),d},U.getSelected=function(a,b){return X.hasOwnProperty(a)?X[a]:b},U.getSelectedWaveformInfo=function(){return Y[X.waveform]},U.getTempoString=function(){return"bpm"+(parseFloat(X.tempo)||W.tempo)+" l16"},U.init=function(a){"string"==typeof a&&(hb=a),timbre.envmobile&&timbre.setup({samplerate:.5*timbre.samplerate}),r("#sort-options"),j(),S(),u(!0,"randomUnique"),P("#scale-options"),T("#scale-display",$('#scale-options li[data-scale="'+X.scale+'"]').text()),$("#scale-filter").on("keyup",q).on("focus",function(){$(this).val(""),$("#scale-options li").show()}),Q("#soundfont-options"),T("#soundfont-display",$('#soundfont-options li[data-soundfont="'+X.soundfont+'"]').text()),$("#soundfont-filter").on("keyup",q).on("focus",function(){$(this).val(""),$("#soundfont-options li").show()}),U.createSlider("#volume-container",W.volume,F),U.createSlider("#tempo-container",W.tempo,E),U.createSlider("#center-note-container",W.centerNote,C),U.createSlider("#data-size-container",W.dataSize,D),Z.a=U.createSlider("#waveform-adshr-attack-container",{value:Y[X.waveform].a,min:10,max:500,step:5},G),Z.d=U.createSlider("#waveform-adshr-decay-container",{value:Y[X.waveform].d,min:10,max:2e3,step:5},G),Z.s=U.createSlider("#waveform-adshr-sustain-container",{value:Y[X.waveform].s,min:0,max:1,step:.01},G),Z.h=U.createSlider("#waveform-adshr-hold-container",{value:Y[X.waveform].h,min:10,max:3e3,step:5},G),Z.r=U.createSlider("#waveform-adshr-release-container",{value:Y[X.waveform].r,min:10,max:3e3,step:5},G),e=$("#sort-autoplay"),$("#audio-type-container .btn").on("click",m),$("#audio-type-tab-link").on("click",n),$('#audio-type-container .btn[data-audio-type="'+X.audioType+'"]').click(),$("#waveform .btn-group .btn").on("click",H),$("span[data-midi-export]").on("click",J),$("#midi-export-btn").on("click",K),$("#modal-sort-open").on("click",L),$("#add-algorithm-btn").on("click",N),$("#save-algorithm-edit").on("click",o),$("#save-algorithm-new").on("click",p),$("#base-buttons").on("click",".btn",A),$("#sort-options").on("click","li",I),$(".sort-visualization").on("click",M),$("#sort-options [data-sort="+X.sort+"]").click(),_.base.drawWaveformCanvases(),T("#volume-display",X.volume),T("#tempo-display",X.tempo),T("#center-note-display",X.centerNote,y),T("#data-size-display",X.dataSize)},a.AudioSort=U}(this),/*!
 * Project: Audio Sort
 *    File: AudioSort.instruments.js
 *  Source: https://github.com/skratchdot/audio-sort/
 *
 * Copyright (c) 2013 skratchdot
 * Licensed under the MIT license.
 */
function(a){"use strict";a.AudioSort.instruments=[{val:0,name:"Acoustic Grand Piano",group:"Piano"},{val:1,name:"Bright Acoustic Piano",group:"Piano"},{val:2,name:"Electric Grand Piano",group:"Piano"},{val:3,name:"Honky-tonk Piano",group:"Piano"},{val:4,name:"Electric Piano 1",group:"Piano"},{val:5,name:"Electric Piano 2",group:"Piano"},{val:6,name:"Harpsichord",group:"Piano"},{val:7,name:"Clavinet",group:"Piano"},{val:8,name:"Celesta",group:"Chromatic Percussion"},{val:9,name:"Glockenspiel",group:"Chromatic Percussion"},{val:10,name:"Music Box",group:"Chromatic Percussion"},{val:11,name:"Vibraphone",group:"Chromatic Percussion"},{val:12,name:"Marimba",group:"Chromatic Percussion"},{val:13,name:"Xylophone",group:"Chromatic Percussion"},{val:14,name:"Tubular Bells",group:"Chromatic Percussion"},{val:15,name:"Dulcimer",group:"Chromatic Percussion"},{val:16,name:"Drawbar Organ",group:"Organ"},{val:17,name:"Percussive Organ",group:"Organ"},{val:18,name:"Rock Organ",group:"Organ"},{val:19,name:"Church Organ",group:"Organ"},{val:20,name:"Reed Organ",group:"Organ"},{val:21,name:"Accordion",group:"Organ"},{val:22,name:"Harmonica",group:"Organ"},{val:23,name:"Tango Accordion",group:"Organ"},{val:24,name:"Acoustic Guitar (nylon)",group:"Guitar"},{val:25,name:"Acoustic Guitar (steel)",group:"Guitar"},{val:26,name:"Electric Guitar (jazz)",group:"Guitar"},{val:27,name:"Electric Guitar (clean)",group:"Guitar"},{val:28,name:"Electric Guitar (muted)",group:"Guitar"},{val:29,name:"Overdriven Guitar",group:"Guitar"},{val:30,name:"Distortion Guitar",group:"Guitar"},{val:31,name:"Guitar Harmonics",group:"Guitar"},{val:32,name:"Acoustic Bass",group:"Bass"},{val:33,name:"Electric Bass (finger)",group:"Bass"},{val:34,name:"Electric Bass (pick)",group:"Bass"},{val:35,name:"Fretless Bass",group:"Bass"},{val:36,name:"Slap Bass 1",group:"Bass"},{val:37,name:"Slap Bass 2",group:"Bass"},{val:38,name:"Synth Bass 1",group:"Bass"},{val:39,name:"Synth Bass 2",group:"Bass"},{val:40,name:"Violin",group:"Strings"},{val:41,name:"Viola",group:"Strings"},{val:42,name:"Cello",group:"Strings"},{val:43,name:"Contrabass",group:"Strings"},{val:44,name:"Tremolo Strings",group:"Strings"},{val:45,name:"Pizzicato Strings",group:"Strings"},{val:46,name:"Orchestral Harp",group:"Strings"},{val:47,name:"Timpani",group:"Strings"},{val:48,name:"String Ensemble 1",group:"Ensemble"},{val:49,name:"String Ensemble 2",group:"Ensemble"},{val:50,name:"Synth Strings 1",group:"Ensemble"},{val:51,name:"Synth Strings 2",group:"Ensemble"},{val:52,name:"Choir Aahs",group:"Ensemble"},{val:53,name:"Voice Oohs",group:"Ensemble"},{val:54,name:"Synth Choir",group:"Ensemble"},{val:55,name:"Orchestra Hit",group:"Ensemble"},{val:56,name:"Trumpet",group:"Brass"},{val:57,name:"Trombone",group:"Brass"},{val:58,name:"Tuba",group:"Brass"},{val:59,name:"Muted Trumpet",group:"Brass"},{val:60,name:"French Horn",group:"Brass"},{val:61,name:"Brass Section",group:"Brass"},{val:62,name:"Synth Brass 1",group:"Brass"},{val:63,name:"Synth Brass 2",group:"Brass"},{val:64,name:"Soprano Sax",group:"Reed"},{val:65,name:"Alto Sax",group:"Reed"},{val:66,name:"Tenor Sax",group:"Reed"},{val:67,name:"Baritone Sax",group:"Reed"},{val:68,name:"Oboe",group:"Reed"},{val:69,name:"English Horn",group:"Reed"},{val:70,name:"Bassoon",group:"Reed"},{val:71,name:"Clarinet",group:"Reed"},{val:72,name:"Piccolo",group:"Pipe"},{val:73,name:"Flute",group:"Pipe"},{val:74,name:"Recorder",group:"Pipe"},{val:75,name:"Pan Flute",group:"Pipe"},{val:76,name:"Blown bottle",group:"Pipe"},{val:77,name:"Shakuhachi",group:"Pipe"},{val:78,name:"Whistle",group:"Pipe"},{val:79,name:"Ocarina",group:"Pipe"},{val:80,name:"Lead 1 (square)",group:"Synth Lead"},{val:81,name:"Lead 2 (sawtooth)",group:"Synth Lead"},{val:82,name:"Lead 3 (calliope)",group:"Synth Lead"},{val:83,name:"Lead 4 (chiff)",group:"Synth Lead"},{val:84,name:"Lead 5 (charang)",group:"Synth Lead"},{val:85,name:"Lead 6 (voice)",group:"Synth Lead"},{val:86,name:"Lead 7 (fifths)",group:"Synth Lead"},{val:87,name:"Lead 8 (bass + lead)",group:"Synth Lead"},{val:88,name:"Pad 1 (new age)",group:"Synth Pad"},{val:89,name:"Pad 2 (warm)",group:"Synth Pad"},{val:90,name:"Pad 3 (polysynth)",group:"Synth Pad"},{val:91,name:"Pad 4 (choir)",group:"Synth Pad"},{val:92,name:"Pad 5 (bowed)",group:"Synth Pad"},{val:93,name:"Pad 6 (metallic)",group:"Synth Pad"},{val:94,name:"Pad 7 (halo)",group:"Synth Pad"},{val:95,name:"Pad 8 (sweep)",group:"Synth Pad"},{val:96,name:"FX 1 (rain)",group:"Synth Effects"},{val:97,name:"FX 2 (soundtrack)",group:"Synth Effects"},{val:98,name:"FX 3 (crystal)",group:"Synth Effects"},{val:99,name:"FX 4 (atmosphere)",group:"Synth Effects"},{val:100,name:"FX 5 (brightness)",group:"Synth Effects"},{val:101,name:"FX 6 (goblins)",group:"Synth Effects"},{val:102,name:"FX 7 (echoes)",group:"Synth Effects"},{val:103,name:"FX 8 (sci-fi)",group:"Synth Effects"},{val:104,name:"Sitar",group:"Ethnic"},{val:105,name:"Banjo",group:"Ethnic"},{val:106,name:"Shamisen",group:"Ethnic"},{val:107,name:"Koto",group:"Ethnic"},{val:108,name:"Kalimba",group:"Ethnic"},{val:109,name:"Bagpipe",group:"Ethnic"},{val:110,name:"Fiddle",group:"Ethnic"},{val:111,name:"Shanai",group:"Ethnic"},{val:112,name:"Tinkle Bell",group:"Percussive"},{val:113,name:"Agogo",group:"Percussive"},{val:114,name:"Steel Drums",group:"Percussive"},{val:115,name:"Woodblock",group:"Percussive"},{val:116,name:"Taiko Drum",group:"Percussive"},{val:117,name:"Melodic Tom",group:"Percussive"},{val:118,name:"Synth Drum",group:"Percussive"},{val:119,name:"Reverse Cymbal",group:"Percussive"},{val:120,name:"Guitar Fret Noise",group:"Sound effects"},{val:121,name:"Breath Noise",group:"Sound effects"},{val:122,name:"Seashore",group:"Sound effects"},{val:123,name:"Bird Tweet",group:"Sound effects"},{val:124,name:"Telephone Ring",group:"Sound effects"},{val:125,name:"Helicopter",group:"Sound effects"},{val:126,name:"Applause",group:"Sound effects"},{val:127,name:"Gunshot",group:"Sound effects"}]}(this);