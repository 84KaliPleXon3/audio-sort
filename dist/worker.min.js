!function(a){"use strict";var b,c,d,e,f,g,h,i={},j=[],k=[],l="",m={play:[],mark:[],swap:[],compare:[],highlight:[]},n=0,o=0;d=function(a){var b,c="object"==typeof a,d=parseInt(1e7*Math.random(),10);return b={id:c?a.id:d+"_"+a,value:c?a.value:a,play:!!c&&a.play,mark:!!c&&a.mark,swap:!!c&&a.swap,justSwapped:!!c&&a.justSwapped,compare:!!c&&a.compare,highlight:!!c&&a.highlight}},e=function(a){(0===k.length||m.hasOwnProperty(a)&&m[a].length)&&b()},b=function(){var a,b,c=[];for(a=0;a<j.length;a++)b=d(j[a]),m.swap.indexOf(b.id)>=0&&(b.justSwapped=!0),m.highlight.indexOf(b.id)>=0&&(b.highlight=!0),c.push(b);k.push({arr:c,compareCount:n,swapCount:o}),m.play=[],m.mark=[],m.swap=[],m.compare=[]},f=function(a){var b;for(b=0;b<j.length;b++)if(j[b].id===a.id)return b;return-1},g=function(a){var b,c,d=[];for(b=0;b<a.length;b++)c=a[b],"number"==typeof c&&(c=i.get(c)),d.push(c);return d},c=function(a,b){var c=h("compare",[a,b]);return n++,k[k.length-1].compareCount=n,c},h=function(a,b){var c,d,h,i,j=g(b);for(e(a),c=k.length-1,d=k[c].arr.length,h=0;h<j.length;h++)i=f(j[h]),i>=0&&i<d&&(k[c].arr[i][a]=!0,m.hasOwnProperty(a)&&m[a].push(k[c].arr[i].id));return j},i.getFrames=function(){return k},i.init=function(a,b){var c;for(j=[],k=[],l=b,n=0,o=0,c=0;c<a.length;c++)j.push(d(a[c]))},i.end=function(a){var c,d;if(l===a){for(0===k.length&&b(),d=k[k.length-1].arr,c=0;c<j.length;c++)if(j[c].id!==d)return b(),k;return k}return[]},i.length=function(){return j.length},i.size=i.length,i.lt=function(a,b){var d=c(a,b);return d[0].value<d[1].value},i.lte=function(a,b){var d=c(a,b);return d[0].value<=d[1].value},i.gt=function(a,b){var d=c(a,b);return d[0].value>d[1].value},i.gte=function(a,b){var d=c(a,b);return d[0].value>=d[1].value},i.eq=function(a,b){var d=c(a,b);return d[0].value===d[1].value},i.neq=function(a,b){var d=c(a,b);return d[0].value!==d[1].value},i.play=function(){h("play",arguments)},i.mark=function(){h("mark",arguments)},i.clearHighlight=function(){m.highlight=[]},i.highlight=function(){i.clearHighlight(),h("highlight",arguments)},i.get=function(a){return d(j[a])},i.swap=function(a,b){var c,d,e,g,i;i=h("swap",[a,b]),c=f(i[0]),d=f(i[1]),e=j[c],g=j[d],j[c]=g,j[d]=e,o++,k[k.length-1].swapCount=o},a.AS=i}(this),function(a){"use strict";var b;b=function(a){var b="bubble";return a=a||b,sort.hasOwnProperty(a)||(a=b),a},a.onmessage=function(b){var c,d,e=Function,f={},g=(new Date).getTime();f.key=b.data.key||"",f.fn=b.data.fn||"function () {\n}",f.arr=b.data.arr||[],c=f.fn.split("\n"),f.fn=c.splice(1,c.length-2).join("\n"),f.fn=new e(f.fn),AS.init(f.arr,g),f.fn(),d=AS.end(g),a.postMessage({key:f.key,frames:d,fn:f.fn.toString()})}}(this);